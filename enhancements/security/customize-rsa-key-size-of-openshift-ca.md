---
title: customize-rsa-key-size-of-openshift-ca
authors:
  - "@jubittajohn"
  - "@sanchezl"
  - "@dinhxuanvu"
reviewers:
  - 
approvers:
  -
api-approvers:
  -
creation-date: 2025-10-20
last-updated: 2025-10-20
tracking-link:
  - https://issues.redhat.com/browse/OCPSTRAT-2271
---

# Customizing RSA keys size of Openshift CA

## Summary
This enhancement introduces support for configuring RSA key sizes for certificate generation, allowing RSA key size of 4096 compared to the currently hard-coded 2048 bits. 

Since OpenShift certificates originate from two sources — the installer (for initial control plane bootstrap) and the Kubernetes API server / OpenShift operators (for ongoing management and rotation) — the configuration must apply consistently across both.

## Motivation
Currently, RSA key sizes are hard-coded to 2048 bits across most certificate generation workflows. However, certain customer policy now require root Certificate Authorities to use a minimum RSA key size of 4096 bits to meet updated cryptographic strength and compliance standards.

### User Stories
- As an OpenShift administrator, I want to configure the root CA certificate to use a 4096-bit RSA key to comply with organizational security policies. 
- As an OpenShift administrator, I want to configure the RSA key szie for root and intermediate certificates to meet varying compliance requirements. 
- As an OpenShift developer, I want to generate certificates with customizable key sizes to maintain consistent cryptographic standards across environments.
- As an OpenShift end user, I want the platform’s certificates to meet strong encryption standards so that my data and connections remain secure.

### Goals
- Introduce configurable RSA key size support for root and intermediate certificates.
- Analyze performance impact when the RSA key size is increased to 4096 bits.
- Preserve upgrade safety and avoid breaking existing certificates.

### Non-Goals
- Introducing a new feature set or feature gate, if configuration alone can achieve the required flexibility.
- Adding new cryptographic algorithms (that are not RSA or ECC)
- Changing the default key size(2048-bit remains default)
- Altering existing certificate rotation mechanisms beyond key size handling.

## Proposal

We are dealing with two main sources of certificates in OpenShift:
- Root CAs generated by the installer — during initial control plane bootstrap.
- Root or intermediate CAs managed by the Kubernetes API server and OpenShift operators, once the cluster is running.

Configuration will be the primary mechanism to enable larger RSA key sizes.

### Workflow Description

#### Add key size configuration

- Cluster CertificateConfig API

```yaml
apiVersion: config.openshift.io/v1
kind: Certificate
metadata:
    name: cluster
spec:
    # similar to tls config we can have pre-defined profiles
    profile: custom
    # key specifications required for 'custom' profile
    custom:
        # signer root certificates
        rootCA:
            keySpec:
                algorithm: RSA
                rsa:
                    bits: 4096
        # signer intermediate certificates
        intermediateCA:
            keySpec:
                algorithm: ECDSA
                ecdsa:
                    curve: P-256
status: { }
```

- InstallConfig CertificateConfig
Something similar for the install-config.yaml:

``` yaml
# key specifications required for 'custom' profile
certificates:
    # signer root certificates
    rootCA:
        keySpec:
            algorithm: RSA
            bits: 4096
    # signer intermediate certificates
    intermediateCA:
        keySpec:
            algorithm: ECDSA
            curve: P-256
```

### API Extensions
As the API evolves, we can add more 'categories', e.g:

```yaml
apiVersion: config.openshift.io/v1
kind: Certificate
metadata:
    name: cluster
spec:
    profile: custom
    custom:
        # signer root certificates
        rootCA:
            keySpec:
                algorithm: RSA
                rsa:
                    bits: 4096
        # signer intermediate certificates
        intermediateCA:
            keySpec:
                algorithm: ECDSA
                ecdsa:
                    curve: P-256
        # tls serving certificates
        serving:
            keySpec:
                algorithm: RSA
                rsa:
                    bits: 2048
        # mtls client certificates
        client:
            keySpec:
                algorithm: RSA
                rsa:
                    bits: 2048
        # webhook tls serving certificates
        webhook:
            keySpec:
                algorithm: RSA
                rsa:
                    bits: 2048
```

### Risks and Mitigations
- Using a key size of 4096 bits causes noticable performance issues during certificate generation and TLS handshakes. The impact can be mitigated by benchmarking performance across different key sizes before release and keeping 2048 bits as the default configuration.
- Both the installer and API server operators must apply the same RSA key size configuration to maintain consistent behavior and trust chains, increasing coordination.The risky can be mitigated by using a single configuration source consumed by both installer and cluster operators.

### Drawbacks

- When upgrading to OpenShift 4.21, rotated certificates will automatically be replaced with versions using the larger RSA key size.
However, there is a set of certificates that will not rotate automatically and must be manually updated following the [known certificate rotation procedure](https://docs.google.com/document/d/1NU1qugecnyDFbKd45XFR0QdNLzFxH8j-y2X7rogCkrE/edit?usp=sharing).

## Design Details

### Open Questions
- Would simply updating our root certificate keys to 4096 bits satisfy this feature?
- What would the performance impact be from updating the RSA key size?

## Test Plan

## Graduation Criteria
Not applicable

### Dev Preview -> Tech Preview
Not applicable

### Tech Preview -> GA
Not applicable

### Removing a deprecated feature
Not applicable

## Upgrade / Downgrade Strategy
??

## Version Skew Strategy
Not applicable

## Operational Aspects of API Extensions
Not applicable

## Support Procedures
Not applicable

## Implementation History

- Current implementation: 

## Alternatives (Not Implemented)
